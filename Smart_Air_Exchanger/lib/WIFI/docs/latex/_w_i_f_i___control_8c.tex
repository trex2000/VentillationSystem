\hypertarget{_w_i_f_i___control_8c}{}\doxysection{C\+:/\+Users/\+Administrator/\+Desktop/\+SAE\+\_\+\+Clone/\+Smart\+\_\+\+Air\+\_\+\+Exchanger/lib/\+WIFI/src/\+WIFI\+\_\+\+Control.c File Reference}
\label{_w_i_f_i___control_8c}\index{C:/Users/Administrator/Desktop/SAE\_Clone/Smart\_Air\_Exchanger/lib/WIFI/src/WIFI\_Control.c@{C:/Users/Administrator/Desktop/SAE\_Clone/Smart\_Air\_Exchanger/lib/WIFI/src/WIFI\_Control.c}}


This file contains the implementations of the functions found in the interface. The private functions are used as the main executing functions, while the exported ones provide a safe access to them.  


{\ttfamily \#include \char`\"{}WIFI\+\_\+\+Config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}WIFI\+\_\+\+Control.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}NVM\+\_\+\+Interface.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Webserver\+\_\+\+Interface.\+h\char`\"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$freertos/\+Free\+RTOS.\+h$>$}\newline
{\ttfamily \#include $<$freertos/task.\+h$>$}\newline
{\ttfamily \#include $<$freertos/event\+\_\+groups.\+h$>$}\newline
{\ttfamily \#include $<$esp\+\_\+system.\+h$>$}\newline
{\ttfamily \#include $<$esp\+\_\+wifi.\+h$>$}\newline
{\ttfamily \#include $<$esp\+\_\+event.\+h$>$}\newline
{\ttfamily \#include $<$esp\+\_\+log.\+h$>$}\newline
{\ttfamily \#include $<$lwip/err.\+h$>$}\newline
{\ttfamily \#include $<$lwip/sys.\+h$>$}\newline
{\ttfamily \#include $<$esp\+\_\+http\+\_\+server.\+h$>$}\newline
Include dependency graph for WIFI\+\_\+\+Control.\+c\+:
% FIG 0
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{_w_i_f_i___control_8c_ad552e7688532cbbecd3967538ced06ac}{WIFI\+\_\+\+CONNECTED\+\_\+\+BIT}}~BIT0
\item 
\#define \mbox{\hyperlink{_w_i_f_i___control_8c_a7d013b55e50dfbda0904f5f933b63ec4}{WIFI\+\_\+\+FAIL\+\_\+\+BIT}}~BIT1
\item 
\#define \mbox{\hyperlink{_w_i_f_i___control_8c_a6c5c924092ed2fdefbc9adb1c0ef582e}{WIFI\+\_\+\+CONNECT\+\_\+\+NVS\+\_\+\+CREDENTIALS}}~0
\item 
\#define \mbox{\hyperlink{_w_i_f_i___control_8c_ae3229f0bc2574674797c59cb337c5d40}{WIFI\+\_\+\+CONNECT\+\_\+\+FROM\+\_\+\+AP}}~1
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{_w_i_f_i___control_8c_a20a3f09dc81d60181b991f9bcec0b3ff}{WIFI\+\_\+v\+\_\+get\+Handler\+Webserver}} (httpd\+\_\+req\+\_\+t $\ast$req)
\begin{DoxyCompactList}\small\item\em The URI handler function to be called during GET /status request. Returns ESP\+\_\+\+OK in case of success. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{_w_i_f_i___control_8c_a08b641aafedd81a136d6d203687a167f}{WIFI\+\_\+v\+\_\+\+Init}} (void)
\begin{DoxyCompactList}\small\item\em The function initializes the netif intreface, creates an esp event loop and registers event handlers on esp Wi-\/fi and IP events. The Wi-\/fi will be at first configured in station operating mode with credentials saved in NVS. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{_w_i_f_i___control_8c_a545df97824460785f4e1870a689ea077}{WIFI\+\_\+i\+\_\+\+Is\+Connected}} (void)
\begin{DoxyCompactList}\small\item\em Returns the Wi-\/fi flag for connection. If connection to Wi-\/fi is provided, flag is 1, otherwise flag is 0. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file contains the implementations of the functions found in the interface. The private functions are used as the main executing functions, while the exported ones provide a safe access to them. 

\begin{DoxyAuthor}{Author}
Baleanu Sorina (\href{mailto:sorina.baleanu@altran.com}{\texttt{ sorina.\+baleanu@altran.\+com}}) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+2 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2021-\/08-\/12
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2021
\end{DoxyCopyright}
\begin{DoxyParagraph}{Source}
\mbox{\hyperlink{_w_i_f_i___control_8c}{WIFI\+\_\+\+Control.\+c}} 
\end{DoxyParagraph}
\begin{DoxyParagraph}{Revision}
1 
\end{DoxyParagraph}
\begin{DoxyParagraph}{Author}
Baleanu Sorina 
\end{DoxyParagraph}
\begin{DoxyParagraph}{Date}
2021.\+08.\+05 
\end{DoxyParagraph}


\mbox{[}to be written\mbox{]} 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{_w_i_f_i___control_8c_ae3229f0bc2574674797c59cb337c5d40}\label{_w_i_f_i___control_8c_ae3229f0bc2574674797c59cb337c5d40}} 
\index{WIFI\_Control.c@{WIFI\_Control.c}!WIFI\_CONNECT\_FROM\_AP@{WIFI\_CONNECT\_FROM\_AP}}
\index{WIFI\_CONNECT\_FROM\_AP@{WIFI\_CONNECT\_FROM\_AP}!WIFI\_Control.c@{WIFI\_Control.c}}
\doxysubsubsection{\texorpdfstring{WIFI\_CONNECT\_FROM\_AP}{WIFI\_CONNECT\_FROM\_AP}}
{\footnotesize\ttfamily \#define WIFI\+\_\+\+CONNECT\+\_\+\+FROM\+\_\+\+AP~1}

Configure Wi-\/fi station with credentials sent via webserver. \mbox{\Hypertarget{_w_i_f_i___control_8c_a6c5c924092ed2fdefbc9adb1c0ef582e}\label{_w_i_f_i___control_8c_a6c5c924092ed2fdefbc9adb1c0ef582e}} 
\index{WIFI\_Control.c@{WIFI\_Control.c}!WIFI\_CONNECT\_NVS\_CREDENTIALS@{WIFI\_CONNECT\_NVS\_CREDENTIALS}}
\index{WIFI\_CONNECT\_NVS\_CREDENTIALS@{WIFI\_CONNECT\_NVS\_CREDENTIALS}!WIFI\_Control.c@{WIFI\_Control.c}}
\doxysubsubsection{\texorpdfstring{WIFI\_CONNECT\_NVS\_CREDENTIALS}{WIFI\_CONNECT\_NVS\_CREDENTIALS}}
{\footnotesize\ttfamily \#define WIFI\+\_\+\+CONNECT\+\_\+\+NVS\+\_\+\+CREDENTIALS~0}

Configure Wi-\/fi station with credentials saved in NVS. \mbox{\Hypertarget{_w_i_f_i___control_8c_ad552e7688532cbbecd3967538ced06ac}\label{_w_i_f_i___control_8c_ad552e7688532cbbecd3967538ced06ac}} 
\index{WIFI\_Control.c@{WIFI\_Control.c}!WIFI\_CONNECTED\_BIT@{WIFI\_CONNECTED\_BIT}}
\index{WIFI\_CONNECTED\_BIT@{WIFI\_CONNECTED\_BIT}!WIFI\_Control.c@{WIFI\_Control.c}}
\doxysubsubsection{\texorpdfstring{WIFI\_CONNECTED\_BIT}{WIFI\_CONNECTED\_BIT}}
{\footnotesize\ttfamily \#define WIFI\+\_\+\+CONNECTED\+\_\+\+BIT~BIT0}

Wi-\/fi connected successfully to the AP with an IP. \mbox{\Hypertarget{_w_i_f_i___control_8c_a7d013b55e50dfbda0904f5f933b63ec4}\label{_w_i_f_i___control_8c_a7d013b55e50dfbda0904f5f933b63ec4}} 
\index{WIFI\_Control.c@{WIFI\_Control.c}!WIFI\_FAIL\_BIT@{WIFI\_FAIL\_BIT}}
\index{WIFI\_FAIL\_BIT@{WIFI\_FAIL\_BIT}!WIFI\_Control.c@{WIFI\_Control.c}}
\doxysubsubsection{\texorpdfstring{WIFI\_FAIL\_BIT}{WIFI\_FAIL\_BIT}}
{\footnotesize\ttfamily \#define WIFI\+\_\+\+FAIL\+\_\+\+BIT~BIT1}

Connection failed after the maximum amount of retries. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_w_i_f_i___control_8c_a545df97824460785f4e1870a689ea077}\label{_w_i_f_i___control_8c_a545df97824460785f4e1870a689ea077}} 
\index{WIFI\_Control.c@{WIFI\_Control.c}!WIFI\_i\_IsConnected@{WIFI\_i\_IsConnected}}
\index{WIFI\_i\_IsConnected@{WIFI\_i\_IsConnected}!WIFI\_Control.c@{WIFI\_Control.c}}
\doxysubsubsection{\texorpdfstring{WIFI\_i\_IsConnected()}{WIFI\_i\_IsConnected()}}
{\footnotesize\ttfamily int8\+\_\+t WIFI\+\_\+i\+\_\+\+Is\+Connected (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Returns the Wi-\/fi flag for connection. If connection to Wi-\/fi is provided, flag is 1, otherwise flag is 0. 

\begin{DoxyReturn}{Returns}
int8\+\_\+t 
\end{DoxyReturn}
\mbox{\Hypertarget{_w_i_f_i___control_8c_a20a3f09dc81d60181b991f9bcec0b3ff}\label{_w_i_f_i___control_8c_a20a3f09dc81d60181b991f9bcec0b3ff}} 
\index{WIFI\_Control.c@{WIFI\_Control.c}!WIFI\_v\_getHandlerWebserver@{WIFI\_v\_getHandlerWebserver}}
\index{WIFI\_v\_getHandlerWebserver@{WIFI\_v\_getHandlerWebserver}!WIFI\_Control.c@{WIFI\_Control.c}}
\doxysubsubsection{\texorpdfstring{WIFI\_v\_getHandlerWebserver()}{WIFI\_v\_getHandlerWebserver()}}
{\footnotesize\ttfamily esp\+\_\+err\+\_\+t WIFI\+\_\+v\+\_\+get\+Handler\+Webserver (\begin{DoxyParamCaption}\item[{httpd\+\_\+req\+\_\+t $\ast$}]{req }\end{DoxyParamCaption})}



The URI handler function to be called during GET /status request. Returns ESP\+\_\+\+OK in case of success. 


\begin{DoxyParams}{Parameters}
{\em req} & The http request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
esp\+\_\+err\+\_\+t ~\newline
 
\end{DoxyReturn}
\mbox{\Hypertarget{_w_i_f_i___control_8c_a08b641aafedd81a136d6d203687a167f}\label{_w_i_f_i___control_8c_a08b641aafedd81a136d6d203687a167f}} 
\index{WIFI\_Control.c@{WIFI\_Control.c}!WIFI\_v\_Init@{WIFI\_v\_Init}}
\index{WIFI\_v\_Init@{WIFI\_v\_Init}!WIFI\_Control.c@{WIFI\_Control.c}}
\doxysubsubsection{\texorpdfstring{WIFI\_v\_Init()}{WIFI\_v\_Init()}}
{\footnotesize\ttfamily void WIFI\+\_\+v\+\_\+\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



The function initializes the netif intreface, creates an esp event loop and registers event handlers on esp Wi-\/fi and IP events. The Wi-\/fi will be at first configured in station operating mode with credentials saved in NVS. 

